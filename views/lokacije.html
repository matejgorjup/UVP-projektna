% rebase('base.html')

<section class="hero is-info welcome is-small">
    <div class="hero-body">
        <div class="container">
            <h1 class="title">
                Lokacija živine
            </h1>
            <h2 class="subtitle">
                Ustrezno glede na dejansko stanje razporedite vaše živali po lokacijah. <br>
                Če lokacija še ne obstaja, jo lahko dodate.
            </h2>
        </div>
    </div>
</section>

% if nerazporejeno != []:
<div class="box">
    <div class="notification is-danger">
        V registru imate živali, ki niso razporejene po lokacijah.
    </div>
    <div class="column">
        <table class="table">
            <thead>
                <tr>
                    <th>ID številka</th>
                    <th>Ime</th>
                    <th>Datum rojstva</th>
                    <th>Spol</th>
                    <th>Pasma</th>
                    <th>Datum prihoda</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                % for zival in nerazporejeno:
                <tr>
                    <td name="id">{{zival.id}}</td>
                    <td>{{zival.ime}}</td>
                    <td>{{zival.rojstvo}}</td>
                    <td>{{zival.spol}}</td>
                    <td>{{zival.pasma}}</td>
                    <td>{{zival.datum_prihoda}}</td>
                    <td>
                        <div class="field has-addons">
                            <div class="control is-expanded">
                                <div class="select is-fullwidth">
                                    <select name="lokacija">
                                        % for lok in lokacije:
                                        <option value="{{lok.ime}}">{{lok.ime}}</option>
                                        % end
                                    </select>
                                </div>
                            </div>
                            <div class="control">
                                <button type="submit" class="button is-primary">Premakni</button>
                            </div>
                        </div>
                    </td>
                </tr>
                % end  
            </tbody>
          </table>
    </div>
</div>
% end

<hr>

<div class="box">
    <form method="POST">
        <div class="field">
            <label class="label">Žival</label>
            <div class="control">
                <div class="select">
                    <select name="zival">
                        % for zival in register:
                        <option value="{{zival.id}}">{{zival.id}}</option>
                        % end
                    </select>
                </div>
            </div>
        </div>
        <div class="field">
            <label class="label">Lokacija premika</label>
            <div class="control">
                <div class="select">
                    <select name="lokacija">
                        % for lok in lokacije:
                        <option value="{{lok.ime}}">{{lok.ime}}</option>
                        % end
                    </select>
                </div>
            </div>
        </div>
        <div class="control">
            <button class="button is-link">Premakni</button>
        </div>
    </form>
</div>

<hr>

<section>
% for lok in lokacije: 
    % if lok.stevilo_zivali() == 0:
    <div class="box">
        <section> 
            <span class="tag is-info is-medium">Ime lokacije: {{lok.ime}}</span>
            <span class="tag is-medium">Površina: {{lok.povrsina}} ha</span>
            <span class="tag is-medium">Trenutno število živali: {{lok.stevilo_zivali()}}</span>
        </section>
        <hr>
    </div>
    % else:
    <div class="box">
        <section>
            <span class="tag is-info is-medium">Ime lokacije: {{lok.ime}}</span>
            <span class="tag is-medium">Površina: {{lok.povrsina}} ha</span>
            <span class="tag is-medium">Trenutno število živali: {{lok.stevilo_zivali()}}</span>
        </section>
        <hr>
        <table class="table">
            <thead>
                <tr>
                    <th>ID številka</th>
                    <th>Ime</th>
                    <th>Datum rojstva</th>
                    <th>Spol</th>
                    <th>Pasma</th>
                    <th>Datum prihoda</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                % for zival in lok.zivali:
                <tr>
                    <td>{{zival.id}}</td>
                    <td>{{zival.ime}}</td>
                    <td>{{zival.rojstvo}}</td>
                    <td>{{zival.spol}}</td>
                    <td>{{zival.pasma}}</td>
                    <td>{{zival.datum_prihoda}}</td>
                    <td>
                        <div class="field has-addons">
                            <div class="control is-expanded">
                                <div class="select is-fullwidth">
                                    <select name="lokacija">
                                        % for lok in lokacije:
                                        <option value="{{lok.ime}}">{{lok.ime}}</option>
                                        % end
                                    </select>
                                </div>
                            </div>
                            <div class="control">
                                  <button type="submit" class="button is-primary">Premakni</button>
                            </div>
                        </div>
                    </td>
                    <td><button class="button is-danger">Odstrani z lokacije</button></td>                                      
                </tr>
                % end  
            </tbody>
        </table>
        <section>
            <button class="button is-succes">Premakni vse</button>
        </section>
    </div>
% end
% end
</section>
<section class="section">
    <div class="buttons">
        <button class="button is-link is-light"><a href="http://127.0.0.1:8080/lokacije/dodaj-lokacijo/" style="text-decoration: none;">Dodaj lokacijo</a></button>
    </div>
</section>



                





